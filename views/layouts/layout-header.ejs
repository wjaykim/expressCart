<!DOCTYPE html>
<html lang="en">

<head>
    <% if (config.injectJs) { %>
        <%- config.injectJs %>
    <% } %>
    <title><%= title %></title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <% if (locals.admin) { %>
        <link rel="icon" type="image/png" href="/images/favicon.png" />
        <!--[if IE]><link rel="SHORTCUT ICON" href="/images/favicon.png"/><![endif]-->
    <% } else { %>
        <link rel="icon" type="image/png" href="/favicon.png" />
        <!--[if IE]><link rel="SHORTCUT ICON" href="/favicon.ico"/><![endif]-->
    <% } %>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <% if (locals.productDescription) { %>
        <meta name="description" content="<%= helpers.snip(productDescription) %>">
    <% } else if (locals.metaDescription) { %>
        <meta name="description" content="<%= helpers.snip(metaDescription) %>">
    <% } else { %>
        <meta name="description" content="<%= helpers.snip(config.cartDescription) %>">
    <% } %>
    <meta name="csrfToken" content="<%= locals.csrfToken %>">
    <meta name="keywords" content="<%= config.cartTitle %>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha256-L/W5Wfqfa0sdBNIKN9cG6QA5F2qx4qICmU2VgLruv9Y=" crossorigin="anonymous" />
    <link rel="stylesheet" href="/stylesheets/pushy<%= config.env %>.css">
    <% if (locals.admin) { %>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gijgo/1.9.13/combined/css/gijgo.min.css"
            integrity="sha256-bH0WSMuCFoG/dxeox/5aOWmaZl729yDg4ylckwSRTfU=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.20.2/codemirror.min.css"
            integrity="sha256-MdzaXfGXzZdeHw/XEV2LNNycipsLk4uZ0FYzO3hbuvI=" crossorigin="anonymous" />
    <% } %>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tokenfield/0.12.0/css/bootstrap-tokenfield.min.css"
        integrity="sha256-4qBzeX420hElp9/FzsuqUNqVobcClz1BjnXoxUDSYQ0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/stylesheets/codemirror-style.min.css">
    <link rel="stylesheet" href="/stylesheets/style<%= config.env %>.css">
    <% if (locals.admin) { %>
        <link rel="stylesheet" href="/stylesheets/admin<%= config.env %>.css">
    <% } %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"
        integrity="sha256-x3YZWtRjM8bJqf48dFAv/qmgL68SI4jqNWeSLMZaMGA=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha256-WqU1JavFxSAMcLP2WIOI+GB2zWmShMI82mTpLDcqFUg=" crossorigin="anonymous"></script>
    <% if (locals.admin) { %>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"
            integrity="sha256-4iQZ6BVL4qNKlQ27TExEhBN1HFPvAvAMbFavKKosSWQ=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gijgo/1.9.13/combined/js/gijgo.min.js"
            integrity="sha256-YZhUu69bCn9uTqQyKwwQ3GyRypS7eaxp/wmVS282sDI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.20.2/codemirror.min.js"
            integrity="sha256-K1exjHe1X4MP24jRizgBaSbUDUrNhFDRSwGoEYGmtJE=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.20.2/mode/css/css.min.js"
            integrity="sha256-D5oJ11cOmRhXSYWELwG2U/XYH3YveZJr9taRYLZ2DSM=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.20.2/mode/xml/xml.min.js"
            integrity="sha256-ERFGS58tayDq5kkyNwd/89iZZ+HglMH7eYXxG1hxTvA=" crossorigin="anonymous"></script>
    <% } %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.25.0/feather.min.js"
        integrity="sha256-NvgyqkM9Vu1DLHkzxTxXQxZNdDymUlwhXcSJEqUfPiU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"
        integrity="sha256-LlHVI5rUauudM5ZcZaD6hHPHKrA7CSefHHnKgq+/AZc=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.7/js/tether.min.js"
        integrity="sha256-4lietOiwRDBKx1goZZbRiwB06L+/bPYEGDIKZt82bgg=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.9/validator.min.js"></script>
    <script src="/javascripts/jquery.bootpag.min.js"></script>
    <script src="/javascripts/cssbeautify.min.js"></script>
    <script src="/javascripts/common<%= config.env %>.js"></script>
    <script src="/javascripts/expressCart<%= config.env %>.js"></script>
    <% if (locals.admin) { %>
        <script src="/javascripts/admin<%= config.env %>.js"></script>
    <% } %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tokenfield/0.12.0/bootstrap-tokenfield.min.js"
        integrity="sha256-jdwX0QzXB7z7Xc7Vz0ovtIHWO5qIZWg0aLcGv44JDgE=" crossorigin="anonymous"></script>
    <!-- SEO data -->
    <% if (locals.pageUrl) { %>
        <link rel="canonical" href="<%= pageUrl %>" />
    <% } else { %>
        <link rel="canonical" href="<%= config.baseUrl %>" />
    <% } %>
    <meta name="referrer" content="origin" />
    <% if (config.facebookAppId) { %>
        <meta property="fb:app_id" content="<%= config.facebookAppId %>" />
    <% } %>
    <meta property="og:site_name" content="<%= config.cartTitle %>" />
    <% if (locals.result && locals.result.productTitle) { %>
        <meta property="og:type" content="product" />
    <% } else { %>
        <meta property="og:type" content="website" />
    <% } %>
    <meta property="og:title" content="<%= title %>" />
    <% if (locals.pageUrl) { %>
        <meta property="og:url" content="<%= pageUrl %>" />
    <% } else { %>
        <meta property="og:url" content="<%= config.baseUrl %>" />
    <% } %>
    <% if (locals.result && locals.result.productImage) { %>
        <meta property="og:image" content="<%= config.baseUrl + result.productImage %>" />
    <% } %>
    <% if (locals.productDescription) { %>
        <meta property="og:description" content="<%= helpers.snip(productDescription) %>">
    <% } else if (locals.metaDescription) { %>
        <meta property="og:description" content="<%= helpers.snip(metaDescription) %>">
    <% } else { %>
        <meta property="og:description" content="<%= helpers.snip(config.cartDescription) %>">
    <% } %>

    <% if (config.twitterHandle) { %>
        <meta property="twitter:site" content="<%= config.twitterHandle %>">
    <% } %>
    <% if (locals.result && locals.result.productTitle) { %>
        <meta property="twitter:card" content="product" />
    <% } else  { %>
        <meta property="twitter:card" content="summary" />
    <% } %>
    <meta property="twitter:title" content="<%= title %>" />
    <% if (locals.pageUrl) { %>
        <meta property="twitter:url" content="<%= pageUrl %>" />
    <% } else { %>
        <meta property="twitter:url" content="<%= config.baseUrl %>" />
    <% } %>

    <% if (!(locals.result && locals.result.productTitle)) { %>
        <script type="application/ld+json">
            {
                "@context": "https://schema.org/",
                <% if (locals.result && locals.result.productTitle) { %>
                    "@type": "Product",
                    "name": "<%= result.productTitle %>",
                    "offers": {
                        "price": "<%= result.productPrice %>",
                        "priceCurrency": "<%= config.currencyISO %>",
                        "description": "<%= helpers.snip(productDescription) %>",
                        "sku": "<%= result._id %>",
                        "url": "<%= pageUrl %>"
                    },
                <% } else { %>
                    "publisher": "<%= config.cartTitle %>",
                    "@type": "WebSite",
                <% } %>
                <% if (locals.result && locals.resultz.productImage) { %>
                    "image": "<%= config.baseUrl + result.productImage %>",
                <% } %>
                <% if (locals.productDescription) { %>
                    "description": "<%= helpers.snip(productDescription) %>",
                <% } %>
                <% if (locals.result && locals.result.productTitle) { %>
                    "sku": "<%= result._id %>",
                <% } %>
                <% if (locals.pageUrl) { %>
                    "url": "<%= pageUrl %>"
                <% } else { %>
                    "url": "<%= config.baseUrl %>"
                <% } %>
            }
        </script>
    <% } %>
    <!-- SEO data -->
    <%_ if (config.googleAnalytics) { %>
        <%_- config.googleAnalytics %>
    <%_ } %>
    <%_ if (config.customCss) { %>
        <style>
            <%= config.customCss %>
        </style>
    <%_ } %>
    </style>
    <% if (locals.admin) { %>
        <link rel="stylesheet" href="/stylesheets/admin<%= config.env %>.css">
    <% } else if (config.theme) { %>
        <link rel="stylesheet" href="/<%= config.theme %>/style<%= config.env %>.css">
        <script src="/<%= config.theme %>/index<%= config.env %>.js"></script>
    <% } %>
</head>

<% if (locals.admin) { %>
<body class="admin">
<% } else { %>
<body>
<% } %>
    <% if (!locals.admin) { %>
        <nav class="navbar navbar-expand-lg justify-content-between mainNavBar">
            <a class="navbar-brand" href="/">
                <% if (config.cartLogo) { %>
                    <img src="<%= config.cartLogo %>" class="img-fluid">
                <% } else { %>
                    <%= config.cartTitle %>
                <% } %>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMenu"
                aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
                <%- helpers.feather('menu') %>
            </button>
            <div id="navbarText">
                <ul class="navbar-nav ml-auto">
                    <% if (config.enableLanguage !== false) { %>
                        <div class="dropdown d-none d-sm-block">
                            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <%- helpers.feather('globe') %>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <% helpers.availableLanguagesEjs().forEach(lang => { %>
                                    <li><a class="dropdown-item" href="/lang/<%= lang %>"><%= __(lang) %></a></li>
                                <% }) %>
                            </div>
                        </div>
                    <% } %>
                    <% if (session.cart) { %>
                        <li class="nav-item"><a href="/checkout/cart" class="btn menu-btn"><%- helpers.feather('shopping-cart') %>
                            <%= __('Cart') %> <span class="badge badge-danger"
                            id="cart-count"><%= session.totlaCartItems %></span></a>
                        </li>
                    <% } else { %>
                        ``   <li class="nav-item"><a href="/checkout/cart" class="btn menu-btn"><%- helpers.feather('shopping-cart') %></i>
                            <%= __('Cart') %> <span class="badge badge-danger" id="cart-count">0</span></a></li>
                    <% } %>
                </ul>
            </div>
        </nav>
    <% } %>
    <div class="site-overlay"></div>
    <% if (!locals.admin && locals.page !== 'checkout' && locals.page !== 'pay') { %>
        <div id="cart" class="col-md-12 pad-left-12 top-pad-10 pushy pushy-right">
            <div class="row <%= locals.checkout %>">
                <div class="col-sm-12 text-right">
                    <button class="pushy-link btn btn-primary" type="button"><%- helpers.feather('x') %></button>
                </div>
            </div>
            <div class="row">
                <div id="cart" class="col-md-12">
                    <%- include('../' + helpers.getTheme('cart')) %>
                    <div class="row">
                        <div class="col-sm-12 <%= helpers.showCartButtons + locals.session.cart %> cart-buttons">
                            <button class="btn btn-danger float-left" id="empty-cart"
                                type="button"><%= __('Empty cart') %></button>
                            <a href="/checkout/information" class="btn btn-primary float-right">Checkout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <% } %>
    <div class="container-fluid content-body h-100" id="container">
        <div class="row h-100">